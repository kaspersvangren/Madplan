
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>Madplan - Fuldt System</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      gap: 2rem;
      padding: 2rem;
      background: #f9f9f9;
    }
    .retter, .ugeplan {
      flex: 1;
    }
    .ret {
      background: #fff;
      border: 1px solid #ccc;
      padding: 0.5rem 1rem;
      margin: 0.5rem 0;
      cursor: grab;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .ret label {
      font-size: 0.8rem;
    }
    .ugeplan {
      border: 2px solid #bbb;
      border-radius: 10px;
      padding: 1rem;
      background: #fff;
    }
    .dag {
      border: 1px dashed #aaa;
      padding: 0.75rem;
      margin: 0.5rem 0;
      min-height: 2.5rem;
      border-radius: 5px;
      position: relative;
    }
    .dag.dragover {
      background: #e0ffe0;
    }
    .ret-navn {
      display: inline-block;
    }
    .remove {
      position: absolute;
      right: 0.5rem;
      top: 0.5rem;
      background: red;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <div class="retter">
    <h2>Retter</h2>
    <div class="ret" draggable="true" data-navn="Pizza">
      <span class="ret-navn">Pizza</span>
      <label><input type="checkbox" class="to-dage"> 2 dage</label>
    </div>
    <div class="ret" draggable="true" data-navn="Burger">
      <span class="ret-navn">Burger</span>
      <label><input type="checkbox" class="to-dage"> 2 dage</label>
    </div>
    <div class="ret" draggable="true" data-navn="Rugbrød">
      <span class="ret-navn">Rugbrød</span>
      <label><input type="checkbox" class="to-dage"> 2 dage</label>
    </div>
    <div class="ret" draggable="true" data-navn="Boller i karry">
      <span class="ret-navn">Boller i karry</span>
      <label><input type="checkbox" class="to-dage"> 2 dage</label>
    </div>
  </div>

  <div class="ugeplan">
    <h2>Ugens mad</h2>
    <div class="dag" data-dag="fredag">Fredag:</div>
    <div class="dag" data-dag="lørdag">Lørdag:</div>
    <div class="dag" data-dag="søndag">Søndag:</div>
    <div class="dag" data-dag="mandag">Mandag:</div>
    <div class="dag" data-dag="tirsdag">Tirsdag:</div>
    <div class="dag" data-dag="onsdag">Onsdag:</div>
    <div class="dag" data-dag="torsdag">Torsdag:</div>
  </div>

  <script>
    const dage = ["fredag", "lørdag", "søndag", "mandag", "tirsdag", "onsdag", "torsdag"];
    let draggedRet = null;
    let draggedToDage = false;

    document.querySelectorAll(".ret").forEach(ret => {
      ret.addEventListener("dragstart", e => {
        draggedRet = ret.getAttribute("data-navn");
        draggedToDage = ret.querySelector(".to-dage").checked;
      });
    });

    document.querySelectorAll(".dag").forEach(dag => {
      dag.addEventListener("dragover", e => {
        e.preventDefault();
        dag.classList.add("dragover");
      });
      dag.addEventListener("dragleave", () => {
        dag.classList.remove("dragover");
      });
      dag.addEventListener("drop", () => {
        dag.classList.remove("dragover");
        const dagNavn = dag.getAttribute("data-dag");

        const indsætRet = (dagnavn) => {
          const target = document.querySelector(`.dag[data-dag='${dagnavn}']`);
          if (!target) return;
          target.innerHTML = `${dagnavn.charAt(0).toUpperCase() + dagnavn.slice(1)}: ${draggedRet}
            <button class="remove" onclick="this.parentElement.innerHTML = this.parentElement.getAttribute('data-dag').charAt(0).toUpperCase() + this.parentElement.getAttribute('data-dag').slice(1) + ':'">✖️</button>`;
        };

        indsætRet(dagNavn);

        if (draggedToDage) {
          const index = dage.indexOf(dagNavn);
          if (index !== -1 && index < dage.length - 1) {
            const næsteDag = dage[index + 1];
            indsætRet(næsteDag);
          }
        }
      });
    });
  </script>
</body>
</html>
